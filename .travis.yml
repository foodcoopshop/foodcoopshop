language: php
 
php:
  - 7.1

services:
  - mysql

env:
  - DB=mysql
  
before_script:
  - git clone --depth 1 git://github.com/foodcoopshop/foodcoopshop
  - mysql -e 'CREATE DATABASE foodcoopshop_test;'
  - mysql foodcoopshop_test < ./Test/test_files/Config/sql/test-db-structure.sql
  - mysql foodcoopshop_test < ./Test/test_files/Config/sql/test-db-data.sql
  - composer install --prefer-dist
  - cp ./Config/travis/* ./Config/
 
script:
  - ./Console/cake test Controller/Component/StringComponent.php --stderr
  
notifications:
  email: false
  